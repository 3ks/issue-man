full_repository_name: "gorda/gorda.io"
verbose: false
maintainers:
  - "GuangmingLuo"
  - "gorda"
  - "ikingye"
  - "malphi"
  - "rootsongjc"
  - "stormgbs"
  - "sunny0826"
  - "wangfakang"
  - "zhaohuabing"
detection_at: "09:00"
skip_weekend: true
flows:
  # /accept 指令
  - name: "/accept"
    permission:
      - "maintainers"
      - "member"
    current_label:
      - "status/pending"
    target_label:
      - "status/waiting-for-pr"
    success_feedback: "Thank you @somebody, this issue had been assigned to you."
    target_limit: 10
    limit_feedback: "Sorry @somebody, We found that you have claimed @count issues, in order to ensure the quality of each issue, please complete those before claiming new one."
    current_column_id: 9001
    target_column_id: 9002
    target_position: "top"
    jobs:
    - name: "warn"
      in: 14 # day
      labels: # 在该状态停留超过一定时间，则提醒
        - "status/waiting-for-pr"
      target_label:  # 添加该 label
        - "status/stale"
        - "status/waiting-for-pr"
      assignees_policy: "@keep_all"
      feedback: "@somebody, please finish the issue as soon as possible, thank you."
    - name: "undo"
      in: 14
      labels: # 在该状态停留超过一定时间，则释放 issue
        - "status/stale"
      remove_labels: # 移除该 label
        - "status/stale"
        - "status/waiting-for-pr"
      target_label:  # 添加该 label
        - "status/pending"
      assignees_policy: "@remove_all"
      current_column_id: 9002 # Project 恢复到原来的 column
      target_column_id: 9001
      target_position: "top"
      feedback: "Everyone can accept the issue now."
  # /pushed 指令
  - name: "/pushed"
    permission:
      - "maintainers"
      - "self"
    current_label:
      - "status/waiting-for-pr"
    target_label:
      - "status/reviewing"

  # /merged 指令
  - name: "/merged"
    permission:
      - "maintainers"
      - "self"
    current_label:
      - "status/reviewing"
    target_label:
      - "status/merged"
    close: true

  # /init 指令
  - name: "/init"
    permission:
      - "maintainers"
    target_label:
      - "kind/page"
      - "release/v0.3"
      - "status/pending"

  # /assign
  - name: "/assign"
    permission:
      - "maintainers"
    mentation: "addition"

  # /unassign 指令，解除分配
  - name: "/unassign"
    permission:
      - "maintainers"
      - "self"
    mentation: "remove"
port: ":8080"
log_dir: "./log/"
log_file: "hook.log"
std_out_file: "hook.std.log"